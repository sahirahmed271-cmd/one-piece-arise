<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>One Piece Ludo Official</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Pirata+One&display=swap');
body {
    margin:0; font-family:'Pirata One', cursive;
    background:url('https://i.ibb.co/7Nv5D6X/onepiece-bg.jpg') no-repeat center center fixed;
    background-size:cover; color:#fff;
    display:flex; justify-content:center; align-items:center; min-height:100vh;
}
.container{text-align:center;width:100%;}
.hidden{display:none;}
#board{margin:20px auto; width:420px; height:420px; background:url('https://i.ibb.co/x2Xx6Zm/ludo-board.png') no-repeat center center; background-size:contain; position:relative;}
.token{width:25px;height:25px;border-radius:50%;position:absolute;transition:all 0.3s ease;}
.token.red{background:red;} .token.blue{background:blue;} .token.green{background:green;} .token.yellow{background:yellow;} .token.purple{background:purple;} .token.orange{background:orange;}
#dice{width:50px;height:50px;margin:10px auto;font-size:30px;background:#fff;color:#000;border-radius:10px;display:flex;justify-content:center;align-items:center;}
button{padding:10px 20px;font-size:16px;margin:5px;cursor:pointer;border:none;border-radius:5px;background:#ffcc00;transition:0.3s;}
button:hover{background:#ffaa00;}
#winner h2{font-size:2em;color:gold;text-shadow:2px 2px #000;}
#controls{margin-top:10px;}
/* Fireworks animation */
@keyframes fireworks {
  0% {transform: scale(0); opacity:1;}
  50% {transform: scale(1.5); opacity:0.7;}
  100% {transform: scale(0); opacity:0;}
}
.firework{
  position:absolute; width:15px; height:15px; background:gold; border-radius:50%;
  animation:fireworks 1s ease-out forwards;
}
</style>
</head>
<body>
<div class="container">
<header><h1>One Piece Ludo</h1></header>

<div id="player-selection">
<h2>Select Number of Players (2-6)</h2>
<input type="number" id="numPlayers" min="2" max="6" value="2">
<button id="startBtn">Start Game</button>
</div>

<div id="game-container" class="hidden">
<div id="board"></div>
<div id="controls">
<div id="current-player">Current Player: <span id="player-name"></span></div>
<button id="rollDiceBtn">Roll Dice</button>
<div id="dice"></div>
</div>
</div>

<div id="winner" class="hidden">
<h2 id="winnerText"></h2>
<button id="restartBtn">Restart Game</button>
</div>
</div>

<script>
const startBtn=document.getElementById('startBtn');
const numPlayersInput=document.getElementById('numPlayers');
const playerSelection=document.getElementById('player-selection');
const gameContainer=document.getElementById('game-container');
const rollDiceBtn=document.getElementById('rollDiceBtn');
const dice=document.getElementById('dice');
const playerNameDisplay=document.getElementById('player-name');
const winnerDiv=document.getElementById('winner');
const winnerText=document.getElementById('winnerText');
const restartBtn=document.getElementById('restartBtn');
const board=document.getElementById('board');

let numPlayers=2;
let players=[];
let currentPlayerIndex=0;
let tokens=[];
const colors=["red","blue","green","yellow","purple","orange"];

// Ludo board path coordinates (simplified)
const path = [];
for(let i=0;i<52;i++){
    let angle=(i/52)*2*Math.PI;
    let radius=150;
    path.push({x:200+radius*Math.cos(angle)-12, y:200+radius*Math.sin(angle)-12});
}

startBtn.addEventListener('click',()=>{
    numPlayers=parseInt(numPlayersInput.value);
    if(numPlayers<2||numPlayers>6)return alert("Choose between 2 and 6 players");
    playerSelection.classList.add('hidden');
    gameContainer.classList.remove('hidden');
    setupPlayers();
});

restartBtn.addEventListener('click',()=>location.reload());

function setupPlayers(){
    players=[]; tokens=[]; board.innerHTML='';
    for(let i=0;i<numPlayers;i++){
        players.push({name:`Player ${i+1}`, color:colors[i], position:0, isAI:i>=2});
        let token=document.createElement('div');
        token.classList.add('token',colors[i]);
        board.appendChild(token);
        tokens.push(token);
        setTokenPosition(i,0);
    }
    updateCurrentPlayerDisplay();
    if(players[currentPlayerIndex].isAI)setTimeout(rollDice,800);
}

rollDiceBtn.addEventListener('click',rollDice);

function rollDice(){
    rollDiceBtn.disabled=true;
    let roll=Math.floor(Math.random()*6)+1;
    animateDice(roll).then(()=>{
        movePlayer(roll);
        if(checkWinner())return showWinner(players[currentPlayerIndex].name);
        currentPlayerIndex=(currentPlayerIndex+1)%numPlayers;
        updateCurrentPlayerDisplay();
        rollDiceBtn.disabled=false;
        if(players[currentPlayerIndex].isAI)setTimeout(rollDice,800);
    });
}

function animateDice(roll){
    return new Promise(res=>{
        let frames=10,count=0;
        let diceInterval=setInterval(()=>{
            dice.innerText=Math.floor(Math.random()*6)+1;
            count++;
            if(count>=frames){ clearInterval(diceInterval); dice.innerText=roll; res(); }
        },50);
    });
}

function movePlayer(roll){
    let player=players[currentPlayerIndex];
    let bestTokenIndex=0;
    // Medium AI: move token closest to home
    if(player.isAI){
        bestTokenIndex=0;
        let minPos=player.position;
        for(let i=0;i<players.length;i++){
            if(players[i].position>minPos){ bestTokenIndex=i; minPos=players[i].position; }
        }
    }
    player.position+=roll;
    if(player.position>51)player.position=51;
    setTokenPosition(currentPlayerIndex,player.position);
    captureOpponent(player.position,currentPlayerIndex);
}

function setTokenPosition(index,pos){
    tokens[index].style.left=path[pos].x+'px';
    tokens[index].style.top=path[pos].y+'px';
}

function captureOpponent(pos,current){
    for(let i=0;i<tokens.length;i++){
        if(i!==current && players[i].position===pos){
            players[i].position=0;
            setTokenPosition(i,0);
        }
    }
}

function updateCurrentPlayerDisplay(){
    playerNameDisplay.innerText=players[currentPlayerIndex].name;
}

function checkWinner(){return players[currentPlayerIndex].position>=51;}

function showWinner(name){
    gameContainer.classList.add('hidden');
    winnerDiv.classList.remove('hidden');
    winnerText.innerText=`${name} Wins! ðŸŽ‰`;
    createFireworks();
}

function createFireworks(){
    for(let i=0;i<20;i++){
        let f=document.createElement('div');
        f.classList.add('firework');
        f.style.left=(Math.random()*400)+'px';
        f.style.top=(Math.random()*400)+'px';
        board.appendChild(f);
        setTimeout(()=>f.remove(),1000);
    }
}
</script>
</body>
</html>







